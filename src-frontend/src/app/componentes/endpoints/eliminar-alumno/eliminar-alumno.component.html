<div class="container-fluid my-5">
  <div class="row">
    <div class="col-12 mt-3">
      <div class="p-4">
        <h2 class="text-center mb-5 fw-bold">Gestionar Alumnos</h2>
        <div class="row my-3 d-flex justify-content-center">
          <!-- Para móviles, la columna de entrada y botones ocupan toda la pantalla -->
          <div class="col-12 col-md-6 mb-3">
            <input type="text" class="form-control" placeholder="Filtrar por nombre" [(ngModel)]="nombreFiltro" (ngModelChange)="filtrarPorNombre()" />
          </div>
          <div class="col-12 col-md-6 text-md-end">
            <button class="btn btn-secondary w-100 w-md-auto" (click)="alternarInactivos()">
              {{ mostrarInactivos ? 'Mostrar solo activos' : 'Mostrar todos' }}
            </button>
          </div>
        </div>
        <div class="text-center mb-3 d-flex flex-column flex-md-row justify-content-center">
          <!-- Botones ocupan toda la pantalla en móviles -->
          <button class="btn btn-warning mb-2 mb-md-0 me-md-2" (click)="darDeBajaAlumnosSeleccionados()">Dar de baja seleccionados</button>
          <button class="btn btn-danger mb-2 mb-md-0" (click)="eliminarAlumnosSeleccionados()">Eliminar seleccionados</button>
        </div>
        <div class="table-responsive">
          <table class="table table-sm custom-table mt-4">
            <thead>
              <tr class="text-center">
                <th>Seleccionar</th>
                <th>Foto</th>
                <th>Nombre</th>
                <th>Apellidos</th>
                <th>Número de Expediente</th>
                <th>DNI</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let alumno of alumnos" class="text-center">
                <td class="align-middle">
                  <div class="form-check d-flex justify-content-center">
                    <input type="checkbox" class="form-check-input" [(ngModel)]="alumno.selected">
                  </div>
                </td>
                <td class="align-middle">
                  <img class="imagen-perfil" [src]="alumno.fotoAlumno?.url ? alumno.fotoAlumno.url : '../../../../assets/media/default.webp'" alt="Perfil del alumno">
                </td>
                <td class="align-middle">{{ alumno.nombre }}</td>
                <td class="align-middle">{{ alumno.apellidos }}</td>
                <td class="align-middle">{{ alumno.numeroExpediente }}</td>
                <td class="align-middle">{{ alumno.nif }}</td>
                <td class="align-middle">
                  <button class="btn btn-warning btn-sm" (click)="darDeBajaAlumno(alumno.id)">Dar de baja</button>
                  <button class="btn btn-danger btn-sm" (click)="eliminarAlumno(alumno.id)">Eliminar</button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <app-paginacion [paginaActual]="paginaActual" [totalPaginas]="totalPaginas" [tamanoPagina]="tamanoPagina" (pageChange)="cambiarPagina($event)">
        </app-paginacion>
      </div>
    </div>
  </div>
</div>
